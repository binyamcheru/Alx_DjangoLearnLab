{% extends "blog/base.html" %}
{% load static %}
{% block content %}
<h2>Your Profile</h2>

{% if messages %}
  <ul class="messages">
    {% for message in messages %}
      <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}

<div class="profile-card">
  <div class="avatar">
    {% if request.user.profile.avatar %}
      <img src="{{ request.user.profile.avatar.url }}" alt="Avatar" width="120" height="120">
    {% else %}
      <img src="{% static 'blog/images/default-avatar.png' %}" alt="Avatar" width="120" height="120">
    {% endif %}
  </div>

  <form method="post" enctype="multipart/form-data" novalidate>
    {% csrf_token %}

    <fieldset>
      <legend>Account</legend>
      {{ u_form.non_field_errors }}
      <div>
        <label>Username</label>
        {{ u_form.username.errors }} {{ u_form.username }}
      </div>
      <div>
        <label>Email</label>
        {{ u_form.email.errors }} {{ u_form.email }}
      </div>
    </fieldset>

    <fieldset>
      <legend>Profile</legend>
      {{ p_form.non_field_errors }}
      <div>
        <label>Bio</label>
        {{ p_form.bio.errors }} {{ p_form.bio }}
      </div>
      <div>
        <label>Avatar</label>
        {{ p_form.avatar.errors }} {{ p_form.avatar }}
      </div>
    </fieldset>

    <button type="submit">Save changes</button>
    <a href="{% url 'logout' %}">Logout</a>
  </form>
</div>
{% endblock %}
